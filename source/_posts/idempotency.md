---
title: 幂等性
date: 2017-09-23 21:36
tags:
    - 幂等性
---

### 实现原理
**幂等性：一次或N次重复操作，不应该产生副作用。**
例如一个支付过程中，用户客户端支付后，未收到服务端的返回结果，进入重试，可能会导致服务端两次扣款。
为避免该问题，用户客户端支付前需先和服务端协商一个ticketId，之后客户端发起的支付行为和服务端返回的结果都应包含该相同的ticketId。
根据上述的理解：HTTP GET、DELETE天然具有幂等性，POST、PUT可能会产生幂等性问题，应注意这一点。

### 方案
请参考我的 [防止重放攻击](https://lbanyan.github.io/2017/10/11/prevent_replay_attacks/)。防止重放攻击可以同时使接口拥有幂等性，真是一举两得。
