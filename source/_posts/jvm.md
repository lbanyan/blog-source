---
title: JVM
tags:
    - JVM
---

详细内容请阅读《Java虚拟机：JVM高级特性与最佳实践》一书。
## 内存区域
- 程序计数器：线程独有，记录下一跳指令。
- Java虚拟机栈：线程独有，存储局部变量、操作栈、动态链接、方法出口。
- Java堆：线程共享，存放对象实例。
- 方法区：线程共享，存储已加载的类信息（类名、访问修饰符、常量池、字段描述、方法描述等）、常量、静态变量、即时编译器编译后的代码。

## 对象已死检测
- 根搜索算法：以栈中引用的对象、方法区中静态引用的对象和常量引用的对象等为起始遍历所有对象，未能遍历到的对象认为已死。

## 垃圾收集算法
- 标记-清除算法：先用根搜索算法把所有待回收的对象标记出来，再统一回收。
- 复制算法：将内存分为相等大小的两部分，当一部分内存使用完，使用根搜索算法标记待回收对象，将不需回收的对象移到另一部分内存，清理掉之前那部分的全部内存。
- 标记-整理算法：整理时将对象向一边移动，直接清理掉另一边。老年代采用的算法。
- 分代收集算法：新生代分为几代，使用复制算法；老年代使用标记-清除算法或标记-整理算法。

## 垃圾收集器
收集器种类很多，不一一讲解。

test_branch分支曾在这里修改过